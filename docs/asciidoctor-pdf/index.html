<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><script>!function(l,p){if(l.protocol!==p){l.protocol=p}else if(l.host=="asciidoctor.netlify.com"){l.replace(p+"//asciidoctor.org/"+l.pathname.substr(l.pathname.indexOf("/",1))+l.search+l.hash)}}(location,"https:")</script><link rel="stylesheet" href="/stylesheets/styles.css"><script src="/javascripts/vendor/custom.modernizr.js"></script><title>Asciidoctor PDF | Asciidoctor</title><meta name="description" content="Learn how to convert your AsciiDoc document directly to PDF using the Asciidoctor PDF converter."><meta name="keywords" content="Asciidoctor, PDF, asciidoctor-pdf, AsciiDoc, convert, theme, Prawn"><link rel="author" href="/humans.txt"></head><body class="antialiased"><nav class="top-bar"><ul class="title-area"><li class="name"><h1><a href="/">Asciidoctor</a></h1></li><li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li></ul><section class="top-bar-section"><ul class="right"><li><a href="/">About</a></li><li class="divider"></li><li><a href="/news/">News</a></li><li class="divider"></li><li><a href="http://gist.asciidoctor.org">Gist</a></li><li class="divider"></li><li><a href="https://github.com/asciidoctor">Code</a></li><li class="divider"></li><li><a href="http://discuss.asciidoctor.org">Discuss</a></li><li class="divider"></li><li><a href="/docs/">Docs</a></li><li class="divider"></li><li class="has-form"><a class="button" href="/docs/asciidoc-writers-guide/">Get Writing!</a></li></ul></section></nav><div class="container"><header><div class="row"><div class="large-12 columns"><h1>Asciidoctor PDF</h1></div></div></header><div class="row"><div class="large-4 columns"><ul class="button-group toolbar" style="margin-bottom: -0.3333em"><li><a class="tiny secondary button toggle-navigation" href="#"><i class="fa fa-toggle-on"></i><i class="fa fa-toggle-off"></i> Nav</a></li><li><span class="separator"></span></li><li><a class="tiny secondary button" href="https://github.com/asciidoctor/asciidoctor.org/edit/master/docs/asciidoctor-pdf.adoc">Edit</a></li><li><a class="tiny secondary button" href="https://github.com/asciidoctor/asciidoctor.org/raw/master/docs/asciidoctor-pdf.adoc">Raw</a></li><li><a class="tiny secondary button" href="https://github.com/asciidoctor/asciidoctor.org/commits/master/docs/asciidoctor-pdf.adoc">History</a></li><li><a href="https://github.com/asciidoctor/asciidoctor-pdf" title="Project Repository"><i class="fa fa-github fa-fw"></i></a></li></ul></div></div><div class="row"><div class="large-4 columns secondary navigation"><div id="toc" class="toc"><div class="title" id="toctitle">Table of Contents</div><ul class="sectlevel1">
<li><a href="#highlights">Highlights</a></li>
<li><a href="#prerequisites">Prerequisites</a>
<ul class="sectlevel2">
<li><a href="#system-encoding">System Encoding</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#install-the-published-gem">Install the Published Gem</a></li>
<li><a href="#an-example-asciidoc-document">An Example AsciiDoc Document</a></li>
<li><a href="#convert-asciidoc-to-pdf">Convert AsciiDoc to PDF</a></li>
</ul>
</li>
<li><a href="#themes">Themes</a>
<ul class="sectlevel2">
<li><a href="#support-for-non-latin-languages">Support for Non-Latin Languages</a></li>
</ul>
</li>
<li><a href="#font-based-icons">Font-Based Icons</a></li>
<li><a href="#image-paths">Image Paths</a></li>
<li><a href="#image-scaling">Image Scaling</a>
<ul class="sectlevel2">
<li><a href="#using-the-pdfwidth-attribute">Using the pdfwidth Attribute</a></li>
<li><a href="#specifying-a-default-width">Specifying a default width</a></li>
<li><a href="#inline-image-sizing">Inline Image Sizing</a></li>
</ul>
</li>
<li><a href="#fonts-in-svg-images">Fonts in SVG Images</a></li>
<li><a href="#supporting-additional-image-file-formats">Supporting Additional Image File Formats</a></li>
<li><a href="#stem-support">STEM Support</a>
<ul class="sectlevel2">
<li><a href="#asciidoctor-mathematical">Asciidoctor Mathematical</a></li>
</ul>
</li>
<li><a href="#shaded-blocks-and-performance">Shaded Blocks and Performance</a></li>
<li><a href="#autofitting-text">Autofitting Text</a></li>
<li><a href="#printing-page-ranges">Printing Page Ranges</a></li>
<li><a href="#index-catalog">Index Catalog</a></li>
<li><a href="#optional-scripts">Optional Scripts</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#authors">Authors</a></li>
<li><a href="#copyright">Copyright</a></li>
</ul></div></div><div class="large-8 columns content"><div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoctor PDF is a native PDF converter for AsciiDoc.
It bypasses the requirement to generate an interim format such as DocBook, Apache FO, or LaTeX.
Instead, you can use it to convert directly from AsciiDoc to PDF.
Its aim is to take the pain out of creating PDF documents from AsciiDoc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="highlights"><a class="anchor" href="#highlights"></a>Highlights</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Direct AsciiDoc to PDF conversion</p>
</li>
<li>
<p><a href="https://github.com/asciidoctor/asciidoctor-pdf/blob/master/docs/theming-guide.adoc">Configuration-driven style and layout</a></p>
</li>
<li>
<p>SVG support</p>
</li>
<li>
<p>PDF document outline (i.e., bookmarks)</p>
</li>
<li>
<p>Table of contents page(s)</p>
</li>
<li>
<p>Document metadata (title, authors, subject, keywords, etc)</p>
</li>
<li>
<p>Internal cross reference links</p>
</li>
<li>
<p>Syntax highlighting with Rouge, Pygments, or CodeRay</p>
</li>
<li>
<p>Page numbering</p>
</li>
<li>
<p>Customizable running content (header and footer)</p>
</li>
<li>
<p>“Keep together” blocks (i.e., page breaks avoided in certain block content)</p>
</li>
<li>
<p>Orphaned section titles avoided</p>
</li>
<li>
<p>Autofit verbatim blocks (as permitted by base_font_size_min setting)</p>
</li>
<li>
<p>Table border settings honored</p>
</li>
<li>
<p>Font-based icons</p>
</li>
<li>
<p>Custom (TTF) fonts</p>
</li>
<li>
<p>Double-sided printing mode (margins alternate on recto and verso pages)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All that&#8217;s needed is Ruby (1.9.3 or above; 2.3.x recommended) and a few Ruby gems, which we explain how to install in the next section.</p>
</div>
<div class="paragraph">
<p>To check if you have Ruby available, use the <code>ruby</code> command to query the version installed:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ ruby --version</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, Asciidoctor PDF automatically installs the latest version of Prawn if you don&#8217;t already have Prawn installed.
This will fail on older versions of Ruby.
To workaround, you need to install certain dependencies first.</p>
</div>
<div class="paragraph">
<p>Starting with Prawn 2.0.0, Prawn requires Ruby &gt;= 2.0.0 during installation.
Therefore, to use Asciidoctor PDF with Ruby 1.9.3, you must first explicitly install the following dependencies to lock the versions:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ gem install prawn --version 1.3.0
  gem install addressable --version 2.4.0
  gem install prawn-svg --version 0.21.0
  gem install prawn-templates --version 0.0.3</pre>
</div>
</div>
<div class="paragraph">
<p>You can then proceed with installation of Asciidoctor PDF on Ruby 1.9.3.</p>
</div>
<div class="paragraph">
<p>Starting with Prawn 2.2.0, Prawn requires Ruby &gt;= 2.1.0 during installation.
Therefore, to use Asciidoctor PDF with Ruby 2.0.0, you must first explicitly install the following dependencies to lock the versions:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ gem install prawn --version 2.1.0
  gem install prawn-svg --version 0.26.0
  gem install prawn-templates --version 0.0.4</pre>
</div>
</div>
<div class="paragraph">
<p>For all other versions of Ruby, you can simply install the Asciidoctor PDF gem.
It will transitively install the required dependencies.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="system-encoding"><a class="anchor" href="#system-encoding"></a>System Encoding</h3>
<div class="paragraph">
<p>Asciidoctor assumes you&#8217;re using UTF-8 encoding.
To minimize encoding problems, make sure the default encoding of your system is set to UTF-8.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using a non-English Windows environment, the default encoding of your system may not be UTF-8.
As a result, you may get an <code>Encoding::UndefinedConversionError</code> or other encoding issues when invoking Asciidoctor.
To solve these problems, we recommend at least changing the active code page in your console to UTF-8.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">chcp 65001</pre>
</div>
</div>
<div class="paragraph">
<p>Once you make this change, all your Unicode headaches will be behind you.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started"><a class="anchor" href="#getting-started"></a>Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can get Asciidoctor PDF by <a href="#install-the-published-gem">installing the published gem</a>.</p>
</div>
<div class="sect2">
<h3 id="install-the-published-gem"><a class="anchor" href="#install-the-published-gem"></a>Install the Published Gem</h3>
<div class="paragraph">
<p>Asciidoctor PDF is published as a pre-release on RubyGems.org.
First, make sure you have satisfied the <a href="#prerequisites">prerequisites</a>.
Then, you can install the published gem using the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ gem install asciidoctor-pdf --pre</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to syntax highlight source listings, you&#8217;ll also want to install Rouge, Pygments, or CodeRay.
Choose one (or more) of the following:</p>
</div>
<div class="literalblock">
<div class="title">Rouge (preferred, minimum version: 1.11.1)</div>
<div class="content">
<pre class="nowrap">$ gem install rouge</pre>
</div>
</div>
<div class="literalblock">
<div class="title">Pygments</div>
<div class="content">
<pre class="nowrap">$ gem install pygments.rb</pre>
</div>
</div>
<div class="literalblock">
<div class="title">CodeRay</div>
<div class="content">
<pre class="nowrap">$ gem install coderay</pre>
</div>
</div>
<div class="paragraph">
<p>You then activate syntax highlighting for a given document by adding the <code>source-highlighter</code> attribute to the document header (Rouge shown):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">:source-highlighter: rouge</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming all the required gems install properly, verify you can run the <code>asciidoctor-pdf</code> script:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor-pdf -v</pre>
</div>
</div>
<div class="paragraph">
<p>If you see the version of Asciidoctor PDF printed, you&#8217;re ready to use Asciidoctor PDF.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s grab an AsciiDoc document to distill and start putting Asciidoctor PDF to use!</p>
</div>
</div>
<div class="sect2">
<h3 id="an-example-asciidoc-document"><a class="anchor" href="#an-example-asciidoc-document"></a>An Example AsciiDoc Document</h3>
<div class="paragraph">
<p>If you don&#8217;t already have an AsciiDoc document, you can use the <a href="#">basic-example.adoc</a> file found in the examples directory of this project.</p>
</div>
<div class="listingblock">
<div class="title">basic-example.adoc</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">= Document Title
Doc Writer &lt;doc@example.com&gt;
:doctype: book
:reproducible:
//:source-highlighter: coderay
:source-highlighter: rouge
:listing-caption: Listing
// Uncomment next line to set page size (default is A4)
//:pdf-page-size: Letter

A simple http://asciidoc.org[AsciiDoc] document.

== Introduction

A paragraph followed by a simple list with square bullets.

[square]
* item 1
* item 2

Here's how you say &quot;`Hello, World!`&quot; in Prawn:

.Create a basic PDF document using Prawn
[source,ruby]
----
require 'prawn'

Prawn::Document.generate 'example.pdf' do
  text 'Hello, World!'
end
----</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s time to convert the AsciiDoc document directly to PDF.</p>
</div>
</div>
<div class="sect2">
<h3 id="convert-asciidoc-to-pdf"><a class="anchor" href="#convert-asciidoc-to-pdf"></a>Convert AsciiDoc to PDF</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You&#8217;ll need the <code>rouge</code> gem installed to run this example since it uses the <code>source-highlighter</code> attribute with the value of <code>rouge</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Converting to PDF is a simple as running the <code>asciidoctor-pdf</code> script using Ruby and passing our AsciiDoc document as the first argument.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor-pdf basic-example.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>This command is just a shorthand way of running:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor -r asciidoctor-pdf -b pdf basic-example.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>asciidoctor-pdf</code> command just saves you from having to remember all those flags.
That&#8217;s why we created it.</p>
</div>
<div class="paragraph">
<p>When the script completes, you should see the file <em class="path">basic-example.pdf</em> in the same directory.
Open the <em class="path">basic-example.pdf</em> file with a PDF viewer to see the result.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/examples/example-pdf-screenshot.png" alt="Screenshot of PDF document" width="800">
</div>
<div class="title">Figure 1. Example PDF document rendered in a PDF viewer</div>
</div>
<div class="paragraph">
<p>The pain of the DocBook toolchain should be melting away about now.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="themes"><a class="anchor" href="#themes"></a>Themes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The layout and styling of the PDF is driven by a YAML configuration file.
To learn how the theming system works and how to create and apply custom themes, refer to the <a href="https://github.com/asciidoctor/asciidoctor-pdf/blob/master/docs/theming-guide.adoc">Asciidoctor PDF Theme Guide</a>.
You can use the built-in theme files, which you can find in the <em class="path">data/themes</em> directory, as examples.</p>
</div>
<div class="sect2">
<h3 id="support-for-non-latin-languages"><a class="anchor" href="#support-for-non-latin-languages"></a>Support for Non-Latin Languages</h3>
<div class="paragraph">
<p>Asciidoctor can process the full range of characters in the UTF-8 character set.
That means you can write your document in any language, save the file with UTF-8 encoding, and expect Asciidoctor to convert the text properly.
However, you may notice that certain characters for certain languages, such as Chinese, are missing in the PDF.
Read on to find out why and how to address it.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re writing in a non-Latin language, you need to use a dedicated theme that provides the necessary fonts.
For example, to produce a PDF from a document written in a CJK language such as Chinese, you need to use a CJK theme.
You can get such a theme by installing the <code>asciidoctor-pdf-cjk-kai_gen_gothic</code> gem.
See the <a href="https://github.com/chloerei/asciidoctor-pdf-cjk-kai_gen_gothic">asciidoctor-pdf-cjk-kai_gen_gothic</a> project for detailed instructions.</p>
</div>
<div class="paragraph">
<p>Using a dedicated theme is necessary because PDF is a &#8220;bring your own font&#8221; kind of system.
In other words, the font you provide must provide glyphs for all the characters.
There&#8217;s no one font that supports all the worlds languages (though some, like Noto Serif, certainly come close).
Even if there were such a font, bundling that font with the main gem would make the package enormous.
It would also severely limit the style choices in the default theme, which targets Latin-based languages.</p>
</div>
<div class="paragraph">
<p>Therefore, we&#8217;re taking the strategy of creating separate dedicated theme gems that target each language family, such as CJK.
The base theme for CJK languages is provided by the <a href="https://github.com/chloerei/asciidoctor-pdf-cjk">asciidoctro-pdf-cjk</a> project and a concrete implementation provided by the <a href="https://github.com/chloerei/asciidoctor-pdf-cjk-kai_gen_gothic">asciidoctor-pdf-cjk-kai_gen_gothic</a> project that&#8217;s based on the kai_gen_gothic font.
Of course, you&#8217;re free to follow this model and create your own theme gem that uses fonts of your choice.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="font-based-icons"><a class="anchor" href="#font-based-icons"></a>Font-Based Icons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use icons in your PDF document using any of the following icon sets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>fa</strong> - <a href="https://fortawesome.github.io/Font-Awesome/" target="_blank" rel="noopener">Font Awesome</a> (default)</p>
</li>
<li>
<p><strong>octicon</strong> - <a href="https://octicons.github.com/" target="_blank" rel="noopener">Octicons</a></p>
</li>
<li>
<p><strong>fi</strong> - <a href="http://zurb.com/playground/foundation-icon-fonts-3" target="_blank" rel="noopener">Foundation Icons</a></p>
</li>
<li>
<p><strong>pf</strong> - <a href="https://paymentfont.com/" target="_blank" rel="noopener">Payment font</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can enable font-based icons by setting the following attribute in the header of your document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">:icons: font</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to override the font set globally, also set the <code>icon-set</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">:icons: font
:icon-set: pf</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example that shows how to use the Amazon icon from the payment font (pf) icon set in a sentence:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">Available now at icon:amazon[].</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the <code>set</code> attribute on the icon macro to override the icon set for a given icon.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">Available now at icon:amazon[set=pf].</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the sizes supported in the HTML backend (lg, 1x, 2x, etc), you can enter any relative value in the size attribute (e.g., 1.5em, 150%, etc).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">icon:android[size=40em]</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can enable use of fonts during PDF generation (instead of in the document header) by passing the <code>icons</code> attribute to the <code>asciidoctor-pdf</code> command.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor-pdf -a icons=font -a icon-set=octicon sample.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>Icon-based fonts are handled by the <code>prawn-icon</code> gem.
To find a complete list of available icons, consult the <a href="https://github.com/jessedoyle/prawn-icon/tree/master/data/fonts">prawn-icon</a> repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="image-paths"><a class="anchor" href="#image-paths"></a>Image Paths</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Images are resolved relative to the value of the <code>imagesdir</code> attribute at the time the converter is run.
This is effectively the same as how the built-in HTML converter works when the <code>data-uri</code> attribute is set.
The <code>imagesdir</code> is blank by default, which means images are resolved relative to the input document.</p>
</div>
<div class="paragraph">
<p>If the image is an SVG, and the SVG includes a nested raster image (PNG or JPG) with a relative path, that path is resolved relative to the directory that contains the SVG.</p>
</div>
<div class="paragraph">
<p>The converter will refuse to include an image if the target is a URI unless the <code>allow-uri-read</code> attribute is enabled via the CLI or API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="image-scaling"><a class="anchor" href="#image-scaling"></a>Image Scaling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since PDF is a fixed-width canvas, you almost always need to specify a width to get the image to fit properly on the page.
There are five ways to specify the width of an image, listed here in order of precedence:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute&#160;Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pdfwidth</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The display width of the image as an absolute size (e.g., 2in), percentage of the content area width (e.g., 75%), or percentage of the page width (e.g., 100vw).
If a unit of measurement is not specified (or not recognized), pt (points) is assumed.
<em>Intended to be used for the PDF converter only.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scaledwidth</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The display width of the image as an absolute size (e.g., 2in) or percentage of the content area width (e.g., 75%).
If a unit of measurement is not specified, % (percentage) is assumed.
If a unit of measurement is recognized, pt (points) is assumed.
<em>Intended to be used for print output such as PDF.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>image_width key from theme</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accepts the same values as pdfwidth.
<em>Only applies to block images.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>width</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unitless display width of the image (assumed to be pixels), typically matching the intrinsic width of the image.
If the width exceeds the content area width, the image is scaled down to the content area width.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>unspecified</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you don&#8217;t specify one of the aforementioned width settings, the intrinsic width of the image is used (the px value is multiplied by 75% to convert to pt, assuming canvas is 96 dpi) unless the width exceeds the content area width, in which case the image is scaled down to the content area width.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The image is always sized according to the explicit or intrinsic width and its height is scaled proportionally.
The height of the image is ignored by the PDF converter unless the height of the image exceeds the content height of the page.
In this case, the image is scaled down to fit on a single page.</p>
</div>
<div class="paragraph">
<p>Images in running content also support the <code>fit</code> attribute.
If the value of this attribute is <code>contain</code>, the image size is increased or decreased to fill the available space while preserving its aspect ratio.
If the value of this attribute is <code>scaled-down</code>, the image size is first resolved in the normal way, then scaled down further to fit within the available space, if necessary.</p>
</div>
<div class="paragraph">
<p>Page background images are automatically scaled to fit the bounds of the page.
Any explicit sizing is ignored for those images.</p>
</div>
<div class="sect2">
<h3 id="using-the-pdfwidth-attribute"><a class="anchor" href="#using-the-pdfwidth-attribute"></a>Using the pdfwidth Attribute</h3>
<div class="paragraph">
<p>The pdfwidth attribute is the recommended way to set the image size for the PDF output.
This attribute is provided for two reasons.
First, the fixed-width canvas often calls for a width that is distinct from other output formats, such as HTML.
Second, this attribute allows the width to be expressed using a variety of units.</p>
</div>
<div class="paragraph">
<p>The pdfwidth attribute supports the following units:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pt (default)</p>
</li>
<li>
<p>in</p>
</li>
<li>
<p>cm</p>
</li>
<li>
<p>mm</p>
</li>
<li>
<p>px</p>
</li>
<li>
<p>pc</p>
</li>
<li>
<p>vw (percentage of page width)</p>
</li>
<li>
<p>% (percentage of content area width)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In all cases, the width is converted to pt.</p>
</div>
</div>
<div class="sect2">
<h3 id="specifying-a-default-width"><a class="anchor" href="#specifying-a-default-width"></a>Specifying a default width</h3>
<div class="paragraph">
<p>If you want to scale all block images that don&#8217;t have a pdfwidth or scaledwidth attribute specified, assign a value to the image_width key in your theme.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="yaml"><span class="key">image</span>:
  <span class="key">width</span>: <span class="string"><span class="content">100%</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="inline-image-sizing"><a class="anchor" href="#inline-image-sizing"></a>Inline Image Sizing</h3>
<div class="paragraph">
<p>Inline images can be sized in much the same way as block images (using the pdfwidth, scaledwidth or width attributes), with the following exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The viewport width unit (i.e., vw) is not recognized in this context.</p>
</li>
<li>
<p>The image will be scaled down, if necessary, to fit the width and height of the content area.</p>
</li>
<li>
<p>Inline images do not currently support a default width controlled from the theme.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the resolved height of the image is less than or equal to 1.5 times the line height, the image won&#8217;t disrupt the line height and is centered vertically in the line.
This is done to maximize the use of available space.
Once the resolved height exceeds this amount, the height of the line is increased (by increasing the font size of the invisible placeholder text) to accommodate the image.
In this case, the surrounding text will be aligned to the bottom of the image.
If the image height exceeds the height of the page, the image will be scaled down to fit on a single page (this may cause the image to advance to the subsequent page).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fonts-in-svg-images"><a class="anchor" href="#fonts-in-svg-images"></a>Fonts in SVG Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoctor PDF uses <a href="https://github.com/mogest/prawn-svg">prawn-svg</a> to embed SVGs in the PDF document, including SVGs generated by Asciidoctor Diagram.</p>
</div>
<div class="paragraph">
<p>Actually, it&#8217;s not accurate to say that prawn-svg embeds the SVG.
Rather, prawn-svg is an SVG <em>renderer</em>.
prawn-svg translates an SVG into native PDF text and graphic objects.
You can think of the SVG as a sequence of drawing commands.
The result becomes indistinguishable from other PDF objects.</p>
</div>
<div class="paragraph">
<p>What that means for text is that any font family used for text in the SVG <em>must</em> be registered in the Asciidoctor PDF theme file (and thus with Prawn).
Otherwise, Prawn will fallback to using the closest matching built-in (afm) font from PDF (e.g., sans-serif becomes Helvetica).
Recall that afm fonts only support basic Latin.
As we like to say, PDF is <a href="https://github.com/asciidoctor/asciidoctor-pdf/blob/master/docs/theming-guide.adoc#built-in-afm-fonts">bring your own font</a>.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using Asciidoctor Diagram to generate SVGs to embed in the PDF, you likely need to specify the default font the diagramming tool uses.
Let&#8217;s assume you are making a plantuml diagram.</p>
</div>
<div class="paragraph">
<p>To set the font used in the diagram, first create a file named <em class="path">plantuml.cfg</em> and populate it with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">skinparam defaultFontName Noto Serif</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can choose any font name that is registered in your Asciidoctor PDF theme file.
When using the default theme, your options are "Noto Serif", "M+ 1mn", and "M+ 1p Fallback".
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, pass that path to the <code>plantumlconfig</code> attribute in your AsciiDoc document (or set the attribute via the CLI or API):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">:plantumlconfig: plantuml.cfg</pre>
</div>
</div>
<div class="paragraph">
<p>Clear the cache of your diagrams and run Asciidoctor PDF with Asciidoctor Diagram enabled.
The diagrams will be generated using Noto Serif as the default font, and Asciidoctor PDF will know what to do.</p>
</div>
<div class="paragraph">
<p>The bottom line is this:
If you&#8217;re using fonts in your SVG, and you want those fonts to be preserved, those fonts must be defined in the Asciidoctor PDF theme file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supporting-additional-image-file-formats"><a class="anchor" href="#supporting-additional-image-file-formats"></a>Supporting Additional Image File Formats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to embed an image into a PDF, Asciidoctor PDF must understand how to read it.
To perform this work, Asciidoctor delegates to the underlying libraries.
<a href="http://prawn.majesticseacreature.com">Prawn</a> provides support for reading JPG and PNG images.
<a href="https://github.com/mogest/prawn-svg">prawn-svg</a> brings support for SVG images.
Without any additional libraries, those are the only supported image file formats.</p>
</div>
<div class="paragraph">
<p>If you need support for additional image formats, such as GIF, TIFF, or interlaced PNG&#8212;&#8203;and you don&#8217;t want to convert those images to a supported format&#8212;&#8203;you must install the <a href="https://github.com/packetmonkey/prawn-gmagick">prawn-gmagick</a> Ruby gem.
prawn-gmagick is an extension for Prawn based on <a href="http://www.graphicsmagick.org">GraphicsMagick</a> that adds support for all the image formats recognized by that library.
prawn-gmagick has the added benefit of significantly reducing the time it takes to generate a PDF containing a lot of images.</p>
</div>
<div class="paragraph">
<p>The prawn-gmagick gem uses native extensions to compile against GraphicsMagick.
This system prerequisite limits installation to Linux and OSX.
Please refer to the <a href="https://github.com/packetmonkey/prawn-gmagick">README for prawn-gmagick</a> to learn how to install it.</p>
</div>
<div class="paragraph">
<p>Once this gem is installed, Asciidoctor automatically switches over to it to handle embedding of all images.
In addition to support for more additional image file formats, this gem also speeds up image processing considerably, so we highly recommend using it if you can.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="stem-support"><a class="anchor" href="#stem-support"></a>STEM Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unlike the built-in HTML converter, Asciidoctor PDF does not provide native support for STEM blocks and inline macros.
That&#8217;s because Asciidoctor core doesn&#8217;t actually process STEM equations.
In the HTML output, Asciidoctor relies on the JavaScript-based MathJax library to parse and render the equations in the browser.
All the HTML converter does is wrap the equations so MathJax is able to find them.</p>
</div>
<div class="paragraph">
<p>In order to insert a rendered equation into the PDF, the toolchain has to parse the equations and convert them to a format the PDF writer (Prawn) can understand.
That typically means converting to an image.</p>
</div>
<div class="paragraph">
<p>The recommended solution is an extension named Asciidoctor Mathematical, which we&#8217;ll cover here.
Another solution still under development uses Mathoid to convert STEM equations to images.
Mathoid is a library that invokes MathJax using a headless browser.
That prototype can be found in the <a href="https://github.com/asciidoctor/asciidoctor-extensions-lab#extension-catalog">Asciidoctor extensions lab</a>.</p>
</div>
<div class="sect2">
<h3 id="asciidoctor-mathematical"><a class="anchor" href="#asciidoctor-mathematical"></a>Asciidoctor Mathematical</h3>
<div class="paragraph">
<p><a href="https://github.com/asciidoctor/asciidoctor-mathematical">Asciidoctor Mathematical</a> is an extension for Asciidoctor that provides alternate processing of STEM blocks and inline macros.
After the document has been parsed, the extension locates all the STEM blocks and inline macros, converts the equations to images using Mathematical, then replaces them with image nodes.
Conversion then proceeds as normal.</p>
</div>
<div class="paragraph">
<p>Asciidoctor Mathematical is a Ruby gem that uses native extensions.
It has a few system prerequisites which limit installation to Linux and OSX.
Please refer to the <a href="https://github.com/asciidoctor/asciidoctor-mathematical#installation">installation section</a> in the Asciidoctor Mathematical README to learn how to install it.</p>
</div>
<div class="paragraph">
<p>Once Asciidoctor Mathematical is installed, you just need to enable it when invoking Asciidoctor PDF using the <code>-r</code> flag:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor-pdf -r asciidoctor-mathematical sample.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;re invoking Asciidoctor via the API, all you need to do is require the gem before invoking Asciidoctor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="ruby">require <span class="string"><span class="delimiter">'</span><span class="content">asciidoctor-mathematical</span><span class="delimiter">'</span></span>

<span class="constant">Asciidoctor</span>.convert_file <span class="string"><span class="delimiter">'</span><span class="content">sample.adoc</span><span class="delimiter">'</span></span>, <span class="key">safe</span>: <span class="symbol">:safe</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To get the best quality equations, and the maximize speed of conversion, we recommend configuring Asciidoctor Mathematical to convert equations to SVG.
You control this setting using the <code>mathematical-format</code> AsciiDoc attribute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ asciidoctor-pdf -r asciidoctor-mathematical -a mathematical-format=svg sample.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the <a href="https://github.com/asciidoctor/asciidoctor-mathematical#readme">README</a> for Asciidoctor Mathematical to learn about additional settings and options.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shaded-blocks-and-performance"><a class="anchor" href="#shaded-blocks-and-performance"></a>Shaded Blocks and Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certain blocks are rendered with a shaded background, such as verbatim (listing, literal, and source), sidebar, and example blocks.
In order to calculate the dimensions of the shaded region, Asciidoctor PDF has to &#8220;dry run&#8221; the block to determine how many pages it consumes.
While this strategy has a low impact when processing shorter blocks, it can drastically deteriorate performance when processing a block that spans dozens of pages.
As a general rule of thumb, you should avoid using shaded blocks which span more than a handful of pages.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="autofitting-text"><a class="anchor" href="#autofitting-text"></a>Autofitting Text</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Verbatim blocks often have long lines that don&#8217;t fit within the fixed width of the PDF canvas.
And unlike on the web, the PDF reader cannot scroll horizontally to reveal the overflow text.
Therefore, the long lines are forced to wrap.
Wrapped lines can make the verbatim blocks hard to read or even cause confusion.</p>
</div>
<div class="paragraph">
<p>To help address this problem, Asciidoctor PDF provides the <code>autofit</code> option on all verbatim (i.e., literal, listing and source) blocks to attempt to fit the text within the available width.
When the <code>autofit</code> option is enabled, Asciidoctor PDF will decrease the font size until the longest line fits without wrapping.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The font size will not be decreased beyond the value of the <code>base_font_size_min</code> key specified in the PDF theme.
If that threshold is reached, lines may still wrap.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of the autofit option enabled on a source block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">[source%autofit,java]
----
@SessionScoped
public class WidgetRepository {
    @GET
    @Produces(&quot;application/json&quot;)
    public List&lt;String&gt; listAll(@QueryParam(&quot;start&quot;) Integer start, @QueryParam(&quot;max&quot;) Integer max) {
        ...
    }
}
----</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to enable the autofit option globally, set the <code>autofit-option</code> document attribute in the document header (or somewhere before the relevant blocks):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">:autofit-option:</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="printing-page-ranges"><a class="anchor" href="#printing-page-ranges"></a>Printing Page Ranges</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The print dialog doesn&#8217;t understand the page numbers labels (which appear in the running content).
Instead, it only considers physical pages.
Therefore, to print a range of pages as they are labeled in the document, you need to add the number of front matter pages (i.e., the non-numbered pages) to the page number range in the print dialog.</p>
</div>
<div class="paragraph">
<p>For example, if you only want to print the first 5 pages labeled with a page number (e.g., 1-5), and there are 2 pages before the page labeled as page 1, you need to add 2 to both numbers in the range, giving you a physical page range of 3-7.
That&#8217;s the range you need to enter into the print dialog.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-catalog"><a class="anchor" href="#index-catalog"></a>Index Catalog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoctor PDF supports generating an index catalog that itemizes all index terms defined in the document, allowing the reader to navigate the document by keyword.</p>
</div>
<div class="paragraph">
<p>To get Asciidoctor PDF to generate an index, simply add an level-1 section flagged with the <code>index</code> style near the end of your document.
The converter will automatically populate the catalog with the list of index terms in the document, organized by first letter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="asciidoc">[index]
= Index</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use any text you want for the title of the section.
The only restriction is that no index terms may be defined below this section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although the catalog is generated automatically, you have to mark the index terms manually.
However, you could use an extension, such as a TreeProcessor, to automatically mark index terms.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optional-scripts"><a class="anchor" href="#optional-scripts"></a>Optional Scripts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoctor PDF also provides a shell script that invokes GhostScript (<code>gs</code>) to optimize and compress the generated PDF with minimal impact on quality.
You must have Ghostscript installed to use it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example usage:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ ./bin/optimize-pdf basic-example.pdf</pre>
</div>
</div>
<div class="paragraph">
<p>The command will generate the file <em class="path">example-optimized.pdf</em> in the current directory.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The <code>optimize-pdf</code> script currently requires a Bash shell (Linux, OSX, etc).
We plan to rewrite the script in Ruby so it works across platforms (see <a href="https://github.com/asciidoctor/asciidoctor-pdf/issues/1">issue #1</a>)
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <code>optimize-pdf</code> script relies on Ghostscript &gt;= 9.10.
Otherwise, it may actually make the PDF larger.
Also, you should only consider using it if the file size of the original PDF is &gt; 5MB.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a file is found with the extension <code>.pdfmark</code> and the same rootname as the input file, it is used to add metadata to the generated PDF document.
This file is necessary to preserve the document metadata since Ghostscript will otherwise drop it.
That&#8217;s why Asciidoctor PDF always creates this file in addition to the PDF.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources"><a class="anchor" href="#resources"></a>Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://groups.google.com/forum/#!msg/prawn-ruby/MbMsCx862iY/6ImCsvLGfVcJ">Discussion about image quality in PDFs</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authors"><a class="anchor" href="#authors"></a>Authors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Asciidoctor PDF was written by <a href="https://github.com/mojavelinux">Dan Allen</a> and <a href="https://github.com/graphitefriction">Sarah White</a> of OpenDevise Inc. on behalf of the Asciidoctor Project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright"><a class="anchor" href="#copyright"></a>Copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2014-2018 OpenDevise Inc. and the Asciidoctor Project.
Free use of this software is granted under the terms of the MIT License.</p>
</div>
<div class="paragraph">
<p>For the full text of the license, see the <a href="https://github.com/asciidoctor/asciidoctor-pdf/blob/master/LICENSE.adoc">LICENSE</a> file.
Refer to the <a href="https://github.com/asciidoctor/asciidoctor-pdf/blob/master/NOTICE.adoc">NOTICE</a> file for information about third-party Open Source software in use.</p>
</div>
</div>
</div></div></div></div></div><footer><div class="row full-width"><div class="large-6 columns"><div class="row" style="margin-bottom: 1em"><div class="large-5 columns"><p><i class="fa fa-fw fa-download"></i> Download: <a class="rubygem" href="https://rubygems.org/gems/asciidoctor"><img src="https://img.shields.io/gem/v/asciidoctor.svg" alt="Asciidoctor gem version" style="margin-top: -2px"></a><br><i class="fa fa-fw fa-github"></i> Development: <a href="https://github.com/asciidoctor">GitHub</a><br><i class="fa fa-fw fa-group"></i> Discussions: <a href="http://discuss.asciidoctor.org">Nabble</a></p></div><div class="large-7 columns"><p><i class="fa fa-fw fa-comments"></i> Chat: <a href="https://gitter.im/asciidoctor/asciidoctor">Gitter</a><br><i class="fa fa-fw fa-twitter"></i> Twitter: <a class="twitter" href="https://twitter.com/asciidoctor">@asciidoctor</a><br><i class="fa fa-fw fa-google-plus-sign"></i> Google+: <a href="https://plus.google.com/116431294697916948181" rel="publisher">Asciidoctor</a></p></div></div></div><div class="large-6 large-text-right columns"><p style="margin-bottom: 1em">Thanks to our <a href="/supporters/">supporters</a> and <a href="/contributors/">contributors</a>!</p><p>Composed in AsciiDoc. Styled by Foundation. Baked with Awestruct.<br>&copy; Asciidoctor Project 2018. Content licensed under CC BY 3.0.</p></div></div></footer><script>document.write('<script src=' + ('__proto__' in {} ? '/javascripts/vendor/zepto' : '/javascripts/vendor/jquery') + '.js><\/script>')</script><script>$('.toggle-navigation').click(function() { $('.navigation').toggle(); $('.content').toggleClass('large-8'); $('.content').toggleClass('large-12'); $('.toolbar').toggleClass('off'); });</script><script src="/javascripts/foundation/foundation.js"></script><script src="/javascripts/foundation/foundation.topbar.js"></script><script>$(document).foundation();</script><script>!function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);}(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-38215684-1','auto'),ga('send','pageview');</script></body></html>